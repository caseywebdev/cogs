#!/usr/bin/env node

'use strict';

var chokidar = require('chokidar');
var Cli = require('../lib/cli');
var path = require('path');

var cli = new Cli();

if (cli.watch) {
  var watcher = chokidar
    .watch(path.resolve(cli.config), {
      ignoreInitial: true,
      persistent: true
    }).on('all', function () {
      cli.close();
      cli = new Cli();
    });
  process.on('SIGTERM', watcher.close.bind(watcher));
}
